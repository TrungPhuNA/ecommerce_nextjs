{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport Master from './../../layouts/Master';\nimport React from \"react\";\nimport Link from \"next/link\";\nimport fetch from 'isomorphic-unfetch';\nimport Router from 'next/router';\nimport './../../static/sass/pages/article.scss';\n\nvar Article =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Article, _React$Component);\n\n  function Article() {\n    _classCallCheck(this, Article);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Article).apply(this, arguments));\n  }\n\n  _createClass(Article, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Master, null, React.createElement(\"section\", {\n        className: \"section-content padding-y\"\n      }, React.createElement(\"div\", {\n        className: \"container\"\n      }, React.createElement(\"div\", {\n        className: \"row\"\n      }, React.createElement(\"div\", {\n        className: \"col-sm-9\"\n      }, React.createElement(\"div\", {\n        className: \"list_article\"\n      }, React.createElement(\"div\", {\n        className: \"title_heading\"\n      }, React.createElement(\"h1\", null, \"Danh s\\xE1ch b\\xE0i vi\\u1EBFt\"), React.createElement(\"p\", null, \"C\\xF3 t\\u1ED5ng s\\u1ED1 \", this.props.total, \" b\\xE0i vi\\u1EBFt \", React.createElement(\"b\", null, this.props.page))), this.props.data.map(function (article, key) {\n        return React.createElement(\"div\", {\n          className: \"list_article_item\",\n          key: key\n        }, React.createElement(\"div\", {\n          className: \"item_content\"\n        }, React.createElement(\"h3\", null, React.createElement(\"a\", {\n          href: \"\"\n        }, article.a_name)), React.createElement(\"p\", null, article.a_description), React.createElement(\"span\", null, article.created_at, \" - 116 l\\u01B0\\u1EE3t xem\")), React.createElement(Link, {\n          href: \"\"\n        }, React.createElement(\"a\", {\n          className: \"item_avatar\"\n        }, React.createElement(\"img\", {\n          src: \"https://123job.vn/uploads/2019/05/22/2019_05_22______9a159264e73f80e572a10c40f1dfbc56.jpg\",\n          alt: article.a_name\n        }))));\n      }), React.createElement(\"div\", {\n        className: \"paginate\"\n      }, React.createElement(\"ul\", null, React.createElement(\"li\", null, this.props.page), React.createElement(\"li\", null, React.createElement(Link, {\n        href: \"/article?page=\".concat(this.props.page - 1),\n        as: \"bai-viet?page=\".concat(this.props.page - 1)\n      }, React.createElement(\"a\", {\n        className: this.props.page <= 1 ? 'disabled' : ''\n      }, \"Trang Tr\\u01B0\\u1EDBc\"))), React.createElement(\"li\", null, React.createElement(Link, {\n        href: \"/article?page=\".concat(this.props.page + 1),\n        as: \"bai-viet?page=\".concat(this.props.page + 1)\n      }, React.createElement(\"a\", {\n        className: this.props.page <= this.props.total_page ? 'disabled' : ''\n      }, \"Trang Sau\"))))))), React.createElement(\"div\", {\n        className: \"col-sm-3\"\n      })))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var query, page, res, articles;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                query = _ref.query;\n                page = 1;\n                console.log(query.page, 'Query');\n                if (query.page) page = query.page;\n                _context.next = 6;\n                return fetch(\"http://codethue.abc/api/article/list?page=\".concat(page));\n\n              case 6:\n                res = _context.sent;\n                _context.next = 9;\n                return res.json();\n\n              case 9:\n                articles = _context.sent;\n                return _context.abrupt(\"return\", {\n                  data: articles.data,\n                  total: articles.total,\n                  page: _parseInt(page),\n                  total_page: _parseInt(articles.last_page)\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Article;\n}(React.Component);\n\nexport default Article;","map":{"version":3,"sources":["/Users/mac/Documents/web/hocjs/ecommerce/pages/article/index.js"],"names":["Master","React","Link","fetch","Router","Article","props","total","page","data","map","article","key","a_name","a_description","created_at","total_page","query","console","log","res","json","articles","last_page","Component"],"mappings":"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","sourcesContent":["import Master from './../../layouts/Master'\nimport React from \"react\";\nimport Link from \"next/link\"\nimport fetch from 'isomorphic-unfetch';\nimport Router from 'next/router';\n\nimport './../../static/sass/pages/article.scss'\n\nclass Article extends React.Component {\n    static async getInitialProps({query}) {\n        let page = 1;\n        console.log(query.page,'Query')\n        if (query.page) page = query.page;\n        const res = await fetch(`http://codethue.abc/api/article/list?page=${page}`);\n        const articles = await res.json();\n\n        return {\n            data  : articles.data,\n            total : articles.total,\n            page : parseInt(page),\n            total_page : parseInt(articles.last_page)\n        };\n    }\n    render() {\n        return (\n            <Master>\n                <section className=\"section-content padding-y\">\n                    <div className=\"container\">\n                        <div className=\"row\">\n                            <div className=\"col-sm-9\">\n                                <div className=\"list_article\">\n                                    <div className=\"title_heading\">\n                                        <h1>Danh sách bài viết</h1>\n                                        <p>Có tổng số {this.props.total} bài viết <b>{this.props.page}</b></p>\n                                    </div>\n                                    {this.props.data.map((article,key) => (\n                                        <div className=\"list_article_item\" key={key}>\n                                            <div className=\"item_content\">\n                                                <h3><a href=\"\">{article.a_name}</a></h3>\n                                                <p>{article.a_description}</p>\n                                                <span>{article.created_at} - 116 lượt xem</span>\n                                            </div>\n                                            <Link href=\"\">\n                                                <a className=\"item_avatar\">\n                                                    <img src=\"https://123job.vn/uploads/2019/05/22/2019_05_22______9a159264e73f80e572a10c40f1dfbc56.jpg\"  alt={article.a_name} />\n                                                </a>\n                                            </Link>\n                                        </div>            \n                                    ))}\n                                    <div className=\"paginate\">\n                                        <ul>\n                                            <li>{this.props.page}</li>\n                                            <li>\n                                                <Link href={`/article?page=${this.props.page - 1}`} as={`bai-viet?page=${this.props.page - 1}`}>\n                                                    <a className={this.props.page <= 1 ? 'disabled' : '' }>Trang Trước</a>\n                                                </Link>\n                                            </li>\n                                            <li>\n                                                <Link href={`/article?page=${this.props.page +1}`} as={`bai-viet?page=${this.props.page + 1}`}>\n                                                    <a className={this.props.page <= this.props.total_page ? 'disabled' : '' }>Trang Sau</a>\n                                                </Link>\n                                            </li>\n                                        </ul>\n                                    </div>    \n                                </div>\n                            </div>   \n                            <div className=\"col-sm-3\">\n\n                            </div>   \n                        </div>\n                    </div>\n                </section>\n            </Master>\n        )\n    }\n}\nexport default Article;"]},"metadata":{},"sourceType":"module"}